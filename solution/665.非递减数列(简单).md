# 665.非递减数列(简单)

[题目链接](https://leetcode-cn.com/problems/non-decreasing-array/)

## 题目描述:

给你一个长度为 n 的整数数组，请你判断在最多改变 1 个元素的情况下，该数组能否变成一个非递减数列。

我们是这样定义一个非递减数列的：对于数组中任意的 i (0 <= i <= n-2)，总满足 nums[i] <= nums[i + 1]。

## 示例 1:

```
输入: nums = [4,2,3]
输出: true
解释: 你可以通过把第一个4变成1来使得它成为一个非递减数列。
```

## 示例 2:

```
输入: nums = [4,2,1]
输出: false
解释: 你不能在只改变一个元素的情况下将其变为非递减数列。
```

## 提示:

- 1 <= n <= 10 的 4 次方
- -10 的 5 次方 <= nums[i] <= 10 的 5 次方

## 题目分析:

输入给定的是一个数组，我们要考虑如何在只改变一个元素的情况下把数组变成非递减的序列。这道题应该采用贪心策略，具体贪心的地方就是应该观前顾后，不仅要考虑当前的元素，还应该考虑当前左右的元素。考虑以下的几种情况：
1. 整个数组已经是非递减序列，例如：[1, 2, 3, 4]，符号题意，直接返回true就行。
2. 数组刚开始两个元素排列为递增序列，其余元素为非递减序列，例如：[4, 1, 2, 3]，我们只需要把首元素(4)改为第二个元素的值(1)即可使数组变成非递减序列，更改后数组为[1, 1, 2, 3]，只需更改一次，符合题意，返回true。
3. 数组开头一段为非递减序列，最后两个元素排列为递增序列，例如：[1, 2, 3, 2]，我们只需要修改最后一个元素(2)更新为倒数第二个元素(3)，即可使序列变成非递减序列，修改后数组为[1, 2, 3, 3]，也只需修改一次，返回true。
4. 数组中出现一个元素致使数组为非递减序列，例如：[1, 3, 2, 4, 5]，我们要考虑那个元素(2)左右的元素，只有符合[左元素的值]小于等于[当前元素的值]小于等于[右元素的值]才能使得在修改一次的情况下把数组变成非递减序列。检查当前元素左右元素的值，刚好满足条件，返回true。

我们首先定义变量计算更新元素的次数。在更改次数小于两次的情况下遍历数组，检查当前元素前一个元素是否大于当前元素，若大于当前元素，则说明这两个元素组成的序列为递减序列，需要更新元素。更新次数加一，进一步判断当前元素的前面的第二个元素，若前面的第二个元素存在且值大于当前元素，为了使数组序列非递减，需要把当前元素更新为前一个元素的值才能符合非递减要求。如果前面的第二个元素存在且小于当前元素，为了使数组序列非递减，应该把当前元素的前一个元素更新为当前元素的值，才能符合要求。遍历完整个数组后，做出最后的判断，如果修改次数小于两次则说明最多改变 1 个元素的情况下，能使该数组变成一个非递减数列。

## 题解:

执行用时: 1 ms

内存消耗: 39.6 MB

```java
class Solution {
    public boolean checkPossibility(int[] nums) {
        // 定义变量计算改变次数
        int count = 0;
        // 当更改次数小于两次，遍历数组
        for (int i = 1; i < nums.length && count < 2; ++i) {
            // 如果当前两个元素检查为非递减序列，则进行下一次检查
            if (nums[i] >= nums[i - 1]) {
                continue;
            }
            // 否则为递减序列，i-1位置大于i，至少需要修改一个位置上的值
            count++;
            // 那么进一步判断i-2位置是否也大于i
            if (i - 2 >= 0 && nums[i - 2] > nums[i]) {
                // 如果i-2位置存在且i-2位置的值大于当前值，当前位置的值更新为i-1的值
                nums[i] = nums[i - 1];
            } else {
                // 如果i-2位置存在且i-2位置的值小于等于当前值，i-1的值更新为当前位置的值
                nums[i - 1] = nums[i];
            }
        }
        // 返回更改次数是否小于等于1
        return count <= 1;
    }
}
```

题目来源:力扣(LeetCode)
